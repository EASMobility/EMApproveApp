Ext.define('eaApprove.view.contact.Show', {
    extend: 'Ext.Container',
    xtype: 'contact-show',
	requires: [
	     'eaApprove.view.contact.History',
		 'eaApprove.view.contact.Prdetail',
		 'eaApprove.view.contact.ReportItems',
        ],
    config: {
	width:'100%',
height:'85%',
               title: 'Requisition',
      
	//baseCls:'x-show-contact_background',
 	 scrollable: {
        direction: 'vertical'
    },  
        items: [
	
				
		{ 
		xtype:'toolbar',
		 height:'2.0em',
		 docked:'top',
		 cls:'subtoolbar',
		 id:'prhid',
		 title: {
                            title: '',
							
                            style: {
                                'text-align': 'center',
								'font-size': '1.0em',
								
                            }
                        }, 
		
		
						
                    },
					
		
			
			{
			     xtype:'panel',
                id: 'textbox',
				//width: '100%',
					  
				cls: 'x-show-contact_new',
				tpl:[
				'<div><table border-radius:"0.4em" width="100%" height="100%" class="tableclass">','<tbody>','<tr>','<td width ="34%" valign="top" class="prdsideheadfont">From </td>','<td class="prdsidevaluefont">{FROMUSER}</td>','</tr>','<tr>','<td width ="34%" valign="top" class="prdsideheadfont">Description </td>','<td class="prdsidevaluefont">{DESCRIPTION}</td>','</tr>','<tr>','<td width ="34%" valign="top" class="prdsideheadfont">Start Date </td>','<td class="prdsidevaluefont">{FULLAPPROVALREQUESTEDDATE}</td>','</tr>','<tr>','<td width ="34%"  valign="top" class="prdsideheadfont" ">Due Date </td>','<td class="prdsidevaluefont">{FULLAPPROVALREQUESTEDBY}</td>','</tr>','<tr>','<td width ="34%" valign="top" class="prdsideheadfont">Amount </td>','<td class="prdsidevaluefont">{Amount}</td>','</tr>','</tbody></table>','</div>' 
				].join('')										

				},
			{	xtype:'panel',
		height:'2%',
		cls:'detailpanel',
        html:'<div> Details</div>'
		},
			{
               id: 'content2',
				xtype:'list',
				id:'listItem',
				cls: 'x-show-contact_bottom',
				scrollable:false,
				itemTpl: [ '<div>','<table>',
							'<tr><td valign="top" width="100%" class="fonttest">{title}</td><td width="25%"><img alt="" src="resources/images/arrow.png" style="width: 10px;height:10px" /></td></tr>',
 							'</table></div>'],
				data: [
						{ title: 'Purchase Requisition Details' },
						{ title: 'History' }
					],
					listeners: {
                }
					
					
               
            },
		
			{
              //  id: 'content2',
			  //baseCls:'x-show-toolbar',
				xtype:'toolbar',
				docked:'bottom',
				cls:'prdtoolbar',
			items:[
			//added for approve and reject
			{xtype:'button',
			ui:'action',
			text:'&nbspApprove&nbsp',
			id:'approveButton',
			ui:'confirm',
			handler:function(){
			var button1 = Ext.getCmp('mainview').getNavigationBar().query('button');
			button1[0].disable();
			this.fireEvent('onApproveClick', this);
			},
			
			},
			{xtype:'spacer'},
			{xtype:'button',
			ui:'action',
			text:'&nbsp&nbsp&nbspReject&nbsp&nbsp&nbsp',
			id:'rejectButton',
			ui:'decline',
			handler:function(){
			var button1 = Ext.getCmp('mainview').getNavigationBar().query('button');
			button1[0].disable();
			this.fireEvent('onRejectClick', this);
			},
			},
			//endssss
			/* {xtype:'spacer'},
			{xtype:'button',
			ui:'action',
			text:'Request More Info',
			} */]
               
            },
			
			
        ],
		
        record: null

    },
		
   
    
     updateRecord: function(newRecord) {
	
        if (newRecord) {
           Ext.getCmp('prhid').setTitle("Requisition ID"+" "+newRecord.data.REQUISITIONNUMBER);
			this.down('#textbox').setData(newRecord.data);
			//this.down('#content2').setData(newRecord.data);
			//this.down('#content3').setData(newRecord.data);
       
        }
    },
    initialize: function() {
 	 	
    				
    	 this.on('painted', this.setvalidation);       
    	 },
    	
    	 setvalidation: function() {
    	    //alert("paintd");
    	    bar = Ext.getCmp('mainview').getNavigationBar();
    		   bar.setDefaultBackButtonText('Worklist');
    		
    		 if(approvedOrNot==true){
    			 Ext.getCmp('rejectButton').setDisabled(true);
    	   Ext.getCmp('approveButton').setDisabled(true);	}else
    	   {
    	    Ext.getCmp('rejectButton').setDisabled(false);
    	   Ext.getCmp('approveButton').setDisabled(false);
    	   
    	   }
    	 } 
});
